webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container center valign-wrapper"},[e("router-view")],1)])},staticRenderFns:[]};var o=a("VU/8")({name:"App",components:{}},s,!1,function(t){a("cRTm")},null,null).exports,r=a("/ocq"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"dashboard"}},[e("h3",[this._v("Votes Dashboard")])])}]},c=a("VU/8")({name:"dashboard",data:function(){return{}}},i,!1,null,null,null).exports,l=a("kxiW"),u=a.n(l),d=(a("881v"),u.a.initializeApp({apiKey:"AIzaSyDCGSOk8dWz6Dk9T6nDKGzv_xfGdM5prqI",authDomain:"atlas-9c7fe.firebaseapp.com",databaseURL:"https://atlas-9c7fe.firebaseio.com",projectId:"atlas-9c7fe",storageBucket:"atlas-9c7fe.appspot.com",messagingSenderId:"768281781057"}).firestore()),m={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("nav",[e("div",{staticClass:"nav-wrapper blue"},[e("div",{staticClass:"container"},[e("a",{staticClass:"brand-logos center flow-text",attrs:{href:"#!"}},[this._v("Atlas Got Talent")])])])])}]},p={name:"cast-vote",components:{Navbar:a("VU/8")(null,m,!1,null,null,null).exports},data:function(){return{contestants:[],cast:0}},methods:{vote:function(t){this.cast++;var e=JSON.parse(localStorage.getItem("user"));d.collection("votes").add({code:e.code,name:t,quantity:e.quantity}).then(function(t){console.log("Document written with ID: ",t.id),M.toast({html:"Voted Successfully!",classes:"green",completeCallback:function(){localStorage.clear(),location.reload(!0)}})}).catch(function(t){console.error("Error adding document: ",t),M.toast({html:"Voting failed!",classes:"red"});var e=localStorage.getItem("jwt");d.collection("codes").doc(e).set({state:"1"},{merge:!0}).then(function(){console.log("Document successfully written!"),M.toast({html:"Refresh page and try again!",classes:"red"}),localStorage.clear()}).catch(function(t){console.error("Error writing document: ",t)})})}},created:function(){var t=this;d.collection("contestants").orderBy("name").get().then(function(e){e.forEach(function(e){var n={id:e.id,name:e.data().name,atlas_id:e.data().person_id,region:e.data().regions,desc:e.data().other,img:a("dcuH")("./"+e.data().name.toLowerCase()+".jpeg")};t.contestants.push(n)})});var e=localStorage.getItem("jwt");d.collection("codes").doc(e).set({state:"0"},{merge:!0}).then(function(){console.log("Document successfully written!")}).catch(function(t){console.error("Error writing document: ",t)})}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"cast-vote"}},[a("Navbar"),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"5%"}},t._l(t.contestants,function(e){return a("div",{key:e.id,staticClass:"col s12 m4",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-image"},[a("img",{staticClass:"responsive-img imge",attrs:{src:e.img}}),t._v(" "),a("span",{staticClass:"card-title"},[t._v(t._s(e.name))]),t._v(" "),a("a",{staticClass:"btn-floating btn-lg halfway-fab waves-effect waves-light blue",attrs:{disabled:t.cast>0},on:{click:function(a){return t.vote(e.name)}}},[a("i",{staticClass:"fas fa-vote-yea"})])]),t._v(" "),a("div",{staticClass:"card-content"},[a("p",[t._v(t._s(e.region))])])])])}),0)],1)},staticRenderFns:[]},v=a("VU/8")(p,f,!1,null,null,null).exports,g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"cast-state"}},[e("h3",[this._v("State of Vote Cast")])])}]},h=a("VU/8")({name:"cast-state",data:function(){return{}}},g,!1,null,null,null).exports,_=a("mvHQ"),b=a.n(_),w={name:"login",data:function(){return{mycode:"",codeState:null,quantity:null}},methods:{doSubmit:function(t){var e=this;t.preventDefault(),d.collection("codes").where("code","==",this.mycode).where("state","==","1").get().then(function(t){if(t.empty)return console.log("not found"),M.toast({html:"Code is invalid or used!",classes:"red"}),"";t.forEach(function(t){M.toast({html:"Success",classes:"green"}),e.codeState=t.data().state,e.quantity=t.data().quantity,localStorage.setItem("user",b()(t.data())),localStorage.setItem("jwt",t.id),null!=localStorage.getItem("jwt")&&(e.$emit("loggedIn"),null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push("vote"))})})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col s10 offset-s1 m4 offset-m4"},[a("div",{staticClass:"card blue hoverable center"},[a("div",{staticClass:"card-content white-text center"},[a("span",{staticClass:"card-title"},[t._v("ATLAS Got Talent")]),t._v(" "),a("p",[t._v("Enter your code from the coupon!")]),t._v(" "),a("form",[a("div",{staticClass:"input-field white-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mycode,expression:"mycode"}],staticClass:"validate",attrs:{id:"last_name",type:"text",autocomplete:"false"},domProps:{value:t.mycode},on:{input:function(e){e.target.composing||(t.mycode=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit",name:"action"},on:{click:t.doSubmit}},[t._v("Submit "),a("i",{staticClass:"far fa-paper-plane right"})])])])])])])])},staticRenderFns:[]};var C=a("VU/8")(w,y,!1,function(t){a("Z2tl")},null,null).exports;n.a.use(r.a);var S=new r.a({mode:"history",routes:[{path:"/",name:"Login",component:C,meta:{guest:!0}},{path:"/vote",name:"cast-vote",component:v,meta:{requiresAuth:!0}},{path:"/vote/done",name:"cast-state",component:h,meta:{guest:!0}},{path:"/ndzi",name:"Dashboard",component:c,meta:{requiresAuth:!0,is_admin:!0}},{path:"*",redirect:"/"}]});S.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth}))if(null==localStorage.getItem("jwt"))a({path:"/",params:{nextUrl:t.fullPath}});else{JSON.parse(localStorage.getItem("user"));a()}else t.matched.some(function(t){return t.meta.guest})?null==localStorage.getItem("jwt")?a():a({name:"cast-vote"}):a()});var x=S;n.a.config.productionTip=!1,new n.a({el:"#app",router:x,components:{App:o},template:"<App/>"})},Z2tl:function(t,e){},cRTm:function(t,e){},dcuH:function(t,e,a){var n={"./esinam.jpeg":"umEN","./lisa.jpeg":"qruV","./mabee.jpeg":"igsp","./pediba.jpeg":"rW5K","./solange.jpeg":"eLdb"};function s(t){return a(o(t))}function o(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(n)},s.resolve=o,t.exports=s,s.id="dcuH"},eLdb:function(t,e,a){t.exports=a.p+"static/img/solange.0497182.jpeg"},igsp:function(t,e,a){t.exports=a.p+"static/img/mabee.b9addfd.jpeg"},qruV:function(t,e,a){t.exports=a.p+"static/img/lisa.1249aef.jpeg"},rW5K:function(t,e,a){t.exports=a.p+"static/img/pediba.c9384aa.jpeg"},umEN:function(t,e,a){t.exports=a.p+"static/img/esinam.2460044.jpeg"}},["NHnr"]);
//# sourceMappingURL=app.29155a0731cbd8a85246.js.map